(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40d91bf1"],{"20d6":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"members"},[i("div",{staticClass:"member-top"},[i("div",{staticClass:"title"},[t._v("\n\t\t\t\t会员中心\n\t\t\t")]),i("p",{staticClass:"mem-info"},[i("span",[t._v("您现在是")]),i("span",[t._v(t._s(t.member[t.userInfo.type]))]),3!=t.userInfo.type?i("span",[t._v("，剩余"),i("span",{staticStyle:{color:"#DB233A"}},[t._v(t._s(t.userInfo.days))]),t._v("天")]):t._e()])]),i("div",{staticClass:"member-content"},[t._m(0),i("div",{staticClass:"title",staticStyle:{"margin-top":"1.875rem"}},[t._v("\n\t\t\t\t会员权益\n\t\t\t")]),i("div",{staticClass:"auth",domProps:{innerHTML:t._s(t.userVip)}}),i("div",{staticClass:"title",staticStyle:{"margin-top":"1.875rem"}},[t._v("\n\t\t\t\t选择您要购买的时长\n\t\t\t")]),i("div",{staticClass:"timer-select"},t._l(t.userConfig,(function(e,s){return i("div",{class:t.active==s?"active":"",on:{click:function(e){return t.timerSelect(s)}}},[i("p",[t._v(t._s(e.limitnum)+"个月")]),i("p",[t._v("￥"+t._s(e.price))])])})),0),i("div",{staticClass:"title",staticStyle:{"margin-top":"1.875rem"}},[t._v("\n\t\t\t\t选择支付方式\n\t\t\t")]),i("div",{staticClass:"pay-style"},[i("div",{on:{click:function(e){return t.select(2)}}},[i("img",{attrs:{src:s("e6d9"),alt:""}}),i("span",{staticClass:"ml15"},[t._v("微信支付")]),"2"==t.selected?i("img",{staticClass:"ml20",attrs:{src:s("fff0"),alt:""}}):i("img",{staticClass:"ml20",attrs:{src:s("8490"),alt:""}})]),i("div",{on:{click:function(e){return t.select(1)}}},[i("img",{attrs:{src:s("f99e"),alt:""}}),i("span",{staticClass:"ml15"},[t._v("支付宝支付")]),"1"==t.selected?i("img",{staticClass:"ml20",attrs:{src:s("fff0"),alt:""}}):i("img",{staticClass:"ml20",attrs:{src:s("8490"),alt:""}})])]),i("div",{staticClass:"buy-box"},[i("div",{staticClass:"price"},[t._v("\n\t\t\t\t\t￥"+t._s(t.buyPrice)+"\n\t\t\t\t")]),i("div",{staticClass:"buy-btn",on:{click:t.memberBuy}},[t._v("\n\t\t\t\t\t立即购买\n\t\t\t\t")])])]),t.payPopShow?i("payPop",{attrs:{visible:t.payPopShow,title:t.payTitle,type:t.payType},on:{"update:visible":function(e){t.payPopShow=e}}}):t._e(),t.payQRCodeShow?i("payQRCode",{attrs:{visible:t.payQRCodeShow,content:t.wxPayUrl},on:{"update:visible":function(e){t.payQRCodeShow=e}}}):t._e()],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"members-card"},[i("img",{attrs:{src:s("c1da"),alt:""}})])}],r=s("35c5"),a=s("c559"),c={name:"members",components:{payPop:r["a"],payQRCode:a["a"]},data:function(){return{active:"0",selected:"2",payTitle:"支付成功",payType:"success",payPopShow:!1,payQRCodeShow:!1,userConfig:[],userVip:"",wxPayUrl:"",member:["","普通会员","猩听译会员","永久会员"],orderTimer:null}},computed:{buyPrice:function(){return this.userConfig.length>0?this.userConfig[this.active].price:0},userInfo:function(){return this.$store.getters["getUserInfo"]}},created:function(){this.getUserConfig()},methods:{timerSelect:function(t){this.active=t},select:function(t){this.selected=t},getUserConfig:function(){var t=this;this.$request("/order/userConfig").then((function(e){t.userConfig=e.content.userConfig,t.userVip=e.content.userVip})).catch((function(t){}))},memberBuy:function(){var t=this,e={};e.userConfigId=this.userConfig.length>0?this.userConfig[this.active].id:0,this.$request("/order/userOrder",e,"POST").then((function(e){var s=e.content.order_id;s&&t.pay(s)})).catch((function(t){}))},pay:function(t){var e=this,s={};s.pay_id=this.selected,s.order_id=t,s.type=1,s.pay_client=2,this.$request("/pay/getPayCode",s,"POST").then((function(s){s.content.html&&(e.wxPayUrl=s.content.html,e.payQRCodeShow=!0,e.checkOrderCycle(t))})).catch((function(t){}))},checkOrderCycle:function(t){var e=this,s={};s.order_id=t,s.type=1,this.orderTimer=setInterval((function(){0!=e.payQRCodeShow?e.$request("/pay/checkOrder",s,"POST").then((function(t){"1"==t.content||(e.payQRCodeShow=!1,e.payPopShow=!0,clearInterval(e.orderTimer),e.orderTimer=null,e.getUserInfo())})).catch((function(t){})):e.orderTimer&&(clearInterval(e.orderTimer),e.orderTimer=null)}),2e3)},getUserInfo:function(){var t=this;this.$request("/user/userCenter").then((function(e){var s=e.content.userinfo?e.content.userinfo:"";s&&(localStorage.setItem("userInfo",JSON.stringify(s)),t.$store.commit("setUserInfo",s))})).catch((function(t){}))}}},o=c,l=(s("b869"),s("2173"),s("5511")),u=Object(l["a"])(o,i,n,!1,null,"ee635456",null);e["default"]=u.exports},2173:function(t,e,s){"use strict";var i=s("3a32"),n=s.n(i);n.a},"3a32":function(t,e,s){},"8af5":function(t,e,s){},b869:function(t,e,s){"use strict";var i=s("8af5"),n=s.n(i);n.a},c1da:function(t,e,s){t.exports=s.p+"img/memberCard.b136831e.png"}}]);